<!DOCTYPE html><html lang="zh-TW" prefix="og: http://ogp.me/ns#"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="author" property="og:article:author" content="gholk">
<meta name="copyright" content="Common Creative">
<meta name="generator" content="emacs, markdown">
<!-- 以上一般不用改，以下才要改。 -->

<!-- 後設資料 -->
<meta name="date" property="og:article:public_time" content="2020-01-13T05:11:28.684Z">
<meta name="keywords" property="og:article:tag" content="ccca,nctu,wiki,slide">
<link rel="index" type="text/html" href="index.html" title="首頁">
<link rel="start" type="text/html" href="index.html" title="首頁">
<link rel="next" type="text/html" href="image-processing-transform-code.html" title="影像處理作業三：影像編碼">
<link rel="prev" type="text/html" href="image-processing-edge-line-detection.html" title="影像處理作業二：邊緣與直線偵測">

<!-- 和網頁位置有關 -->
<link rel="icon" type="image/png" href="ext/icon.png">
<link rel="apple-touch-icon" type="image/png" href="ext/icon.png">
<link rel="stylesheet" type="text/css" href="ext/padding-lot.css">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="ext/meta-bloging.js"></script>

<title>CCCA dokuwiki 雜談</title>
</head>
<body>
<main><h1 id="CCCA-dokuwiki-雜談">CCCA dokuwiki 雜談</h1>
<p>wiki 是通常執行於 world wide web 上的多人協作文件管理系統。
其中 dokuwiki 是基於 php 與檔案系統的輕量級 wiki，
在安裝、客制化、維護上門檻都較低，
因此選擇 dokuwiki 作為本社團的網站。
社課上將介紹 <a href="http://ccca.tw">社團的 wiki 網站</a> 、wiki 相比 CMS 的優勢，
以及如何站在 dokuwiki 的肩膀上，以 html php 開發新功能。 </p>
<h2 id="簡報程式">簡報程式</h2>
<script>
function toggleSlideMode() {
  document.body.classList.toggle('white-black-slide')
}
</script>

<style contenteditable="true">
body.white-black-slide {
  font-size: 250%;
  color: white;
  background: black;
}
.white-black-slide a {
  color: cyan;
}
.white-black-slide hr,
.white-black-slide h2,
.white-black-slide h3 {
  margin-top: 3em;
}
</style>

<button onclick="toggleSlideMode()">切換簡報模式</button>

<script>
function scrollToNextSlide() {
  const allSlide = document.querySelectorAll('hr,h2,h3')
  const windowTop = window.scrollY
  for (const slide of allSlide) {
    if (slide.offsetTop > windowTop) {
      scrollTo(0, slide.offsetTop + 1)
      break
    }
  }
}
</script>

<style>
:this + button {
  position: fixed;
  bottom: 0;
  right: 0;
  margin: 1em;
}
</style>

<button onclick="scrollToNextSlide()">下一頁</button>

<h2 id="資訊自主">資訊自主</h2>
<ul>
<li>身為一個資訊社團，有自己的網站是很重要的。</li>
<li>代表你的資料，不會被平台 <strong>綁</strong> 住。</li>
<li>不讓企業掌握個人資訊。</li>
</ul>
<h3 id="免費網站的問題">免費網站的問題</h3>
<ul>
<li>你的內容、上傳的資料，都只在該網站上散布</li>
<li>只能寄居在該網站上</li>
</ul>
<h3 id="搬遷問題">搬遷問題</h3>
<ul>
<li>如何讓你的受眾知道，網址換位址了？</li>
<li><em>公告：網站由 fb.me/xxxx 搬遷到 t.co/xxxx</em></li>
<li>祈禱使用者會自己 <s>通靈</s> google 到新網站</li>
</ul>
<h3 id="根本性的解決辦法">根本性的解決辦法</h3>
<ul>
<li>買一個域名，付錢，確保這個網址永遠連到你的網站。</li>
<li>背後的 ip 可以換</li>
<li>甚至可以托管到 blogspot 這類可以自訂域名的網站</li>
</ul>
<h3 id="域名是唯一的識別符號">域名是唯一的識別符號</h3>
<ul>
<li>只有域名是最通用的識別符號，不依賴於平台</li>
<li>可以印在名片上、寫在書上</li>
<li>平台會倒、會搬家，只有域名可以由自己完全掌控</li>
</ul>
<h3 id="平台只作為宣傳管道">平台只作為宣傳管道</h3>
<ul>
<li>平台是不穩定性的，內容可能遺失</li>
<li>內容必定發布在自己可以完控制的域名下</li>
<li>其它平台只作為宣傳管道</li>
<li>可以用轉貼、自動發布的方式方便管理</li>
</ul>
<h2 id="無法互通的多個私人平台">無法互通的多個私人平台</h2>
<ul>
<li>Facebook 掘起後，web 逐漸往多個無法互通的平台發展。</li>
<li>資訊只在單一平台上流通，facebook 內外成為二個無法溝通的世界。</li>
<li>facebook twitter discord telegram line，都是一個個獨立的世界。</li>
<li>且平台多為公司所有</li>
</ul>
<h3 id="開放的意義">開放的意義</h3>
<ul>
<li>要自己架一個有 facebook 功能的網站，只是技術問題。</li>
<li>但該由誰來管理這個平台？</li>
<li>就算原始碼是開放的，但就算架起了第二個網站，
你的網站和我的網站還是無法互通，只會形成更小的社群，
以社交網站來看是沒有意義的。</li>
</ul>
<h3 id="聯邦制的服務">聯邦制的服務</h3>
<ul>
<li>聯邦或說 <a href="http://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%AF">互聯</a> ，是指多個伺服器之間的使用者，仍可以彼此溝通。</li>
<li>不同的 email 服務提供者的帳號，仍可以互相寄信。</li>
<li>任何人都可以自己架自己的 email server。</li>
<li>其它還有 <a href="http://zh.wikipedia.org/wiki/IRC">IRC</a> 、 <a href="http://zh.wikipedia.org/wiki/%E6%96%B0%E8%81%9E%E7%BE%A4%E7%B5%84">新聞群組</a> 、
早期台灣 bbs 的看板間轉信功能都屬於這類聯邦制的服務。</li>
</ul>
<h3 id="web-的原始聯邦">web 的原始聯邦</h3>
<ul>
<li>整個 world wide web 算是一種廣義的聯邦制，以網頁中的超連結互聯。</li>
<li>原始的消息發送協議 <a href="http://zh.wikipedia.org/wiki/RSS">RSS</a> 。</li>
</ul>
<h3 id="動態網頁後的世界">動態網頁後的世界</h3>
<ul>
<li>很快有人發明了動態網頁，留言板、討論區。這時候 RSS 還足夠運作。</li>
<li>但多數都是相對封閉的。就算可以用網址互連，
但無法在一個論壇回覆另一個論壇的文章。（想想 bbs 的轉信）</li>
</ul>
<h3 id="封閉的社群網路">封閉的社群網路</h3>
<ul>
<li>到最後的終極形態，如 facebook 般的社群網路。
在內部提供完美的消息發送功能。</li>
<li>內部基於動態網頁技術提供消息發送，不再需要原始的 RSS 了。</li>
<li>且自身的規模，不再需要與外部合作。</li>
</ul>
<h3 id="聯邦制的社群網路">聯邦制的社群網路</h3>
<ul>
<li>有沒有可能建造一個，類似 email 的分散式的 facebook？</li>
<li>在不同伺服器上，仍可以像在同一個平台上，互相分享、留言？</li>
<li><a href="http://zh.wikipedia.org/wiki/%E5%88%86%E6%95%A3%E5%BC%8F%E7%A4%BE%E4%BA%A4%E7%B6%B2%E8%B7%AF">分散式社交網路</a> ： <a href="http://zh.wikipedia.org/wiki/GNU_social">GNU social</a> 、 <a href="http://zh.wikipedia.org/wiki/Mastodon">Mastodon</a> 。</li>
</ul>
<h3 id="小結">小結</h3>
<ul>
<li>聯邦式的社群網路，雖然可以自己架，但維護成本可能太高。</li>
<li>學校的資訊社團，可能是合適的大小。</li>
<li>我混了二個學校，卻還是只在空話。</li>
<li>主要還是要有人用。 <s>你就是沒有人</s></li>
</ul>
<h2 id="為什麼選擇-wiki">為什麼選擇 wiki</h2>
<ul>
<li>從頭刻網站太累了，就算用框架也很沒必要。</li>
<li>專門的管理系統如 moodle 太複雜。</li>
<li>blog 和 wiki 是較好的選擇。</li>
</ul>
<h3 id="完全自己寫">完全自己寫</h3>
<ul>
<li>要寫很多 code</li>
<li>自由度最高，想要什麼功能都可以，只是要自己寫。</li>
<li>適合對網站有很多需求的人，像很要求板面、多層式下拉選單、特殊功能者。</li>
</ul>
<h3 id="blog-特色">blog 特色</h3>
<ul>
<li>管理介面有善，適合內容間不需要互連的獨立文章。</li>
<li>板面固定，就是規劃好的文章列表、分類、首頁。</li>
<li>比較接近內容發布中心，而不適合用來管理文件。</li>
</ul>
<h3 id="wiki-特色">wiki 特色</h3>
<ul>
<li>容易客制化，用 wiki 語法，不動到後端的程式也可以改很多東西。</li>
<li>wiki 語法讓使用者能專注在內容而非樣式。</li>
<li>適合多人協作，內建版本管理。</li>
<li>適合有一定技術能力的社團。</li>
</ul>
<h3 id="依附於系統下">依附於系統下</h3>
<ul>
<li>完全自己寫是很累的，就算用框架也是。</li>
<li>使用現有的 blog 或其它系統，在上面改出自己想要的功能比較快。</li>
</ul>
<h3 id="自幹程式的問題">自幹程式的問題</h3>
<ul>
<li>沒有人想維護；時過境遷後，程式如何使用也成為問題。</li>
<li>wiki 的特色是可以用來管理文件，適合把使用說明也寫進 wiki 裡。</li>
<li>甚至可以把程式的原始碼也托管在 wiki 上，畢竟 wiki 有基本的版本管理功能。</li>
</ul>
<h3 id="wiki-的多重角色">wiki 的多重角色</h3>
<ul>
<li>記錄社團的文件：有哪些 server、社辦使用公約、社團組織架構。</li>
<li>當作社團網站：把社團的活動、成果記錄在上面。</li>
<li>當公用 server：可以把自己想要的功能、程式在上面跑。<ul>
<li><a href="https://ccca.tw/playground:test-bookmarklet-js">托管 javascript 小書籤程式</a></li>
</ul>
</li>
</ul>
<h3 id="參考資料">參考資料</h3>
<ul>
<li><a href="https://caslab.ee.ncku.edu.tw/dokuwiki/why_wiki">為什麼要用 wiki</a></li>
<li><a href="https://stackoverflow.com/questions/226132/what-are-the-differences-between-a-wiki-and-a-cms">wiki vs cms</a> 。blog 可以稱作一種 <abbr title="content management system">內容管理系統</abbr> ，但也有較正式的、有複雜權限管理的提供給公司內部使用的商用系統。</li>
<li><a href="https://www.cyut.edu.tw/~ckhung/g/ofset/post.php?id=105c">wiki 作為雲端系統</a></li>
</ul>
<h2 id="dokuwiki-使用說明">dokuwiki 使用說明</h2>
<ul>
<li><a href="http://ccca.tw">ccca wiki</a> 為半開放 wiki，特定內容只對特定使用者開放。</li>
<li>編輯使用 dokuwiki 的純文字語法，類似 mediawiki。</li>
<li>歡迎所有社員、非社員註冊使用。</li>
</ul>
<h3 id="使用者與權限">使用者與權限</h3>
<ul>
<li>未註冊者只能瀏覽與編輯 <code>talk:</code> 命名空間下的頁面。</li>
<li>有社員 <code>officer</code> 、系統管理者 <code>admin</code> 二個群組。</li>
<li>僅有 <code>officer</code> 群組能編輯 html js 語法。</li>
</ul>
<h3 id="命名空間">命名空間</h3>
<ul>
<li>命名空間以 <code>:</code> 分隔， <a href="https://ccca.tw/?do=index">這是 wiki 上所有頁面</a> 。</li>
<li>user: 使用者的個人頁面。</li>
<li><a href="http://ccca.tw/talk:">talk:</a> 用於留言、討論。</li>
<li>playground: 用於測試各類語法。</li>
<li><a href="http://ccca.tw/社課:">社課:</a> 社課公告於此。</li>
<li><a href="http://ccca.tw/社務:">社務:</a> 社團內部文件，只開放社員瀏覽。</li>
</ul>
<h3 id="語法">語法</h3>
<ul>
<li><code>====== 標題 ======</code> ，六個是一級標題。
和 markdown 相反，等號越少越小。</li>
<li><code>**粗體**</code> <code>//斜體//</code> <code>__底線__</code> <code>&apos;&apos;等寬字體&apos;&apos;</code></li>
<li><code>[[頁面名稱|顯示名稱]]</code></li>
<li><a href="http://ccca.tw/wiki:syntax">所有語法</a></li>
</ul>
<hr>
<pre><code>  * 無序清單
    * 第二層
  - 有序清單
</code></pre><hr>
<pre><code>&gt; 引用
&gt;&gt; 第二層引用
</code></pre><hr>
<pre><code>引用檔案。
圖片會顯示，影片、音樂會播放，
檔案會變成可下載連結。

{{image.png}}
</code></pre><hr>
<pre><code>code block

&lt;code javascript&gt;
alert(&apos;hello world!&apos;)
&lt;/code&gt;

downloadable code block

&lt;file javascript hello-world.js&gt;
alert(&apos;hello wrold!&apos;)
&lt;/file&gt;
</code></pre><h2 id="內嵌-html">內嵌 html</h2>
<p>可以嵌入 html，也就可以嵌入 javascript。</p>
<pre><code>hello button

&lt;html&gt;
&lt;button onclick=&quot;hello()&quot;&gt;hello wrold!&lt;/button&gt;
&lt;script&gt;
    function hello() {
        alert(&apos;hello world!&apos;)
    }
&lt;/script&gt;
&lt;/html&gt;
</code></pre><h3 id="javascript-的風險">javascript 的風險</h3>
<ul>
<li>javascript 可以存取 cookie，cookie 含有登入資訊。</li>
<li>如果允許任何人寫 js，只要在頁面插一段程式
把 cookie 用 ajax 發出去，點開該頁面的人的帳號就被盜走了。</li>
</ul>
<h3 id="dokuwiki-對-html-的管理">dokuwiki 對 html 的管理</h3>
<ul>
<li>wiki 有一個選項可以設定是否允許 html，只能全域允許或禁止。</li>
<li>我改了一點原始碼，讓 dokuwiki 在儲存編輯前檢察內容有沒有 html，
如果使用者在 <code>$config[&quot;htmlok_user&quot;]</code> 裡就可以使用 html。</li>
<li>本 wiki 只有屬於 officer 群組的人可以編輯含有 html 的頁面。</li>
</ul>
<h3 id="include-外掛">include 外掛</h3>
<ul>
<li>dokuwiki 有豐富的 <a href="https://www.dokuwiki.org/plugins">外掛系統</a> ，
可以加入自訂語法、快速編輯功能、自製 api。</li>
<li><a href="https://www.dokuwiki.org/plugin:include">include</a> 這個外掛，可以用語法引用另一個頁面的內容。</li>
</ul>
<pre><code>===== 聯絡我們 =====
{{page&gt;聊天室}}
</code></pre><h3 id="用-include-引用-javascript">用 include 引用 javascript</h3>
<ul>
<li>如果程式想要可以複用，可以寫成單獨的頁面，在想用的頁面裡 include。</li>
<li>含有 html 的頁面不能被一般人編輯，
如果想要讓一般人可以編輯，可以把 js 寫在另外的頁面，
再用 include 抓進來，這樣該頁面只有 include 語法沒有 html，
就可以被一般人編輯。</li>
</ul>
<h3 id="dokuwiki-api">dokuwiki api</h3>
<ul>
<li><a href="https://www.dokuwiki.org/devel:xmlrpc">dokuwiki 提供 xml-rpc api</a> ，
可以以 ajax 呼叫， 用來做快速編輯等功能。</li>
<li>用 xml-rpc 的函式庫呼叫會比較方便。</li>
</ul>
<h3 id="使用範例">使用範例</h3>
<ul>
<li><a href="http://ccca.tw/talk:">快速留言板</a></li>
<li><a href="https://ccca.tw/playground:test-bookmarklet-js">小書籤發布</a></li>
</ul>
<h2 id="以-wiki-管理設定檔">以 wiki 管理設定檔</h2>
<ul>
<li>dokuwiki 有一些設定檔是要手動編輯的。</li>
<li>那為什麼不能直接像編輯一個 wiki 頁面一樣，直接編輯它呢？</li>
</ul>
<h3 id="wiki-的-logo">wiki 的 logo</h3>
<ul>
<li>許多人裝好 dokuwiki 後，第一件事就是換上自家的 logo。</li>
<li>如何更換 wiki 的 logo？
<a href="https://www.dokuwiki.org/template:dokuwiki#changing_the_logo">以預設的模版 dokuwiki 來說，只要把圖片上傳為 <code>wiki:logo.png</code> 即可。</a></li>
<li>這是一種以 wiki 來管理 wiki 自身的風格。</li>
</ul>
<h3 id="interwiki-簡寫功能">interwiki 簡寫功能</h3>
<ul>
<li>interwiki 是一種在 wiki 中定義網址簡寫的功能。</li>
<li>在 <code>conf/interwiki.conf</code> 中定義 <code>doku https://www.dokuwiki.org/{NAME}</code> ，</li>
<li>之後只要寫 <code>[[doku&gt;install]]</code> ，
即可解析為連到 <a href="https://www.dokuwiki.org/install">https://www.dokuwiki.org/install</a> 的連結。</li>
</ul>
<h3 id="檔案系統的魔術">檔案系統的魔術</h3>
<ul>
<li>能不能像 wiki:logo 一樣，可以直接把新設定檔當作一個文字檔上傳？
或直接 <a href="https://ccca.tw/admin:interwiki">當成一個頁面編輯</a> ？</li>
<li>由於 dokuwiki 的頁面資料是直接以文字檔的形式儲存在檔案系統，而不是資料庫，
所以只要直接把 <code>conf/interwiki.conf</code> 設成符號連結，連到該頁面的檔案即可。</li>
</ul>
<pre><code>cd conf/interwiki.conf
ln -s ../data/pages/admin/interwiki.txt interwiki.conf
</code></pre><h3 id="格式化設定檔的魔術">格式化設定檔的魔術</h3>
<ul>
<li>但 dokuwiki 只會把 <a href="https://ccca.tw/admin:interwiki">interwiki 頁面</a> 
當作普通的頁面，格式應該會亂掉。（換行被刪掉，並嘗試解析檔案內的 wiki 語法。）</li>
<li>用 <code>&lt;code&gt;</code> 把整個檔案包起來，可以讓排版出來的結果比較好看。</li>
<li>但 interwiki 設定檔解析時看到 <code>&lt;code&gt;</code> 會報錯。</li>
<li>把 <code>&lt;code&gt;</code> 放在 interwiki 的 <code>#</code> 註解後面。</li>
</ul>
<hr>
<pre><code># this is interwiki config file
# &lt;code&gt;
fb        https://www.facebook.com/{NAME}
tg        https://t.me/{NAME}
github    http://github.com/{NAME}
# &lt;/code&gt;
</code></pre><hr>
<p>類似早年 css 和 javascript 內嵌在 html 中的作法，
在不同語言間互相用註解跳脫彼此看不懂的內容。</p>
<pre><code>&lt;script&gt;
// &lt;!--
alert(&apos;hello world!&apos;)
// --&gt;
&lt;/script&gt;
</code></pre><h3 id="interwiki-圖標的魔術">interwiki 圖標的魔術</h3>
<ul>
<li>interwiki 連結前會顯示一個小小圖標，可以自訂不同簡寫對應的圖標。</li>
<li>將與簡寫同名的圖片上傳到 <a href="https://ccca.tw/admin:interwiki-icon:"><code>admin:interwiki-icon:</code> 命名空間</a> 即可。</li>
<li>因為檔案系統上 <code>lib/images/interwiki</code> 為
<code>data/media/admin/interwiki-icon</code> 的符號連結。</li>
</ul>
<h3 id="userstyle.css">userstyle.css</h3>
<ul>
<li>dokuwiki 允許管理者編輯 userstyle.css userscript.js，</li>
<li>一樣 <a href="https://ccca.tw/admin:userstyle.css">將 userstyle.css 設為頁面的連結</a> 。</li>
</ul>
<h3 id="反方向的跳脫">反方向的跳脫</h3>
<ul>
<li><a href="https://ccca.tw/admin:bookmarkletify">admin:bookmarkletify</a> 是另一種反向跳脫，
讀取頁面中的小書籤程式碼並做成小書籤。</li>
<li>把文件和程式寫在一起，並互相關，類似 <a href="http://zh.wikipedia.org/wiki/%E6%96%87%E5%AD%B8%E7%B7%A8%E7%A8%8B">文學編程</a> 。</li>
</ul>
<h3 id="bootstrap">bootstrap</h3>
<ul>
<li>將 wiki 的設定檔移到 wiki 內本身的過程，
類似於編譯器 <abbr title="bootstrap">自舉</abbr> 的過程。</li>
<li>設定檔會佔據一些命名空間，類似
<abbr title="convention over configuration">慣例優先設定</abbr>  。</li>
</ul>
<h3 id="wiki-todo">wiki todo</h3>
<ul>
<li><a href="https://ccca.tw/admin:todo">想做的事很多</a> ，有空的時間很少。</li>
<li>社團需要一個一起發展的專案來凝聚。</li>
<li>這個網站到底有沒有人要用？沒人用的話，我玩這麼多也是白費。</li>
</ul>
</main>

<script defer src="ext/meta-meta.js"></script>
<script defer data-lazy src="ext/load-disqus.js"></script>
<script>autoLoader.autoLoad()</script>

</body></html>
