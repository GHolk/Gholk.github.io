<!DOCTYPE html><html lang="zh-TW" prefix="og: http://ogp.me/ns#"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="author" property="og:article:author" content="gholk">
<meta name="copyright" content="Common Creative">
<meta name="generator" content="emacs, markdown">
<!-- 以上一般不用改，以下才要改。 -->

<!-- 後設資料 -->
<meta name="date" property="og:article:public_time" content="2019-01-30T13:52:35.944Z">
<meta name="keywords" property="og:article:tag" content="geomatics,gnss,csrs">
<link rel="index" type="text/html" href="index.html" title="首頁">
<link rel="start" type="text/html" href="index.html" title="首頁">
<link rel="next" type="text/html" href="linux-grub-uefi-var-bios.html" title="easy2boot 無法讀取 uefi var">
<link rel="prev" type="text/html" href="useful-program-shell-script.html" title="實用的程式設計">

<!-- 和網頁位置有關 -->
<link rel="icon" type="image/png" href="ext/icon.png">
<link rel="apple-touch-icon" type="image/png" href="ext/icon.png">
<link rel="stylesheet" type="text/css" href="ext/padding-lot.css">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="ext/meta-bloging.js"></script>

<title>rtx csrs ppp 比較</title>
</head>
<body>
<main><h1 id="rtx csrs ppp 比較">rtx csrs ppp 比較</h1>
<p>rtx 是星基即時動態定位，可望成為取代 vbs-rtk 的下一代產品。
除了 vbs-rtk 的定位精度，更免除了虛擬基站的計算負擔。
本文將 rtx 與 csrs ppp 比較，探討 rtx 的定位精度。</p>
<h2 id="isrs summary">isrs summary</h2>
<style>
blockquote h1, blockquote h2, blockquote h3 {
  counter-increment: none;
}
blockquote h1::before, blockquote h2::before, blockquote h3::before {
  content: none;
}
</style>

<blockquote>
<h2 id="A Preliminary Comparative Evaluation of Trimble RTX with CSRS-PPP">A Preliminary Comparative Evaluation of Trimble RTX with CSRS-PPP</h2>
<p><u>Ding-Jyun Wang</u> , <u>Peter T.Y. Shih</u></p>
<p><em>Department of Civil Engineering, National Chiao Tung University</em></p>
<p>Kinematic positioning has important applications in bathymetric mapping, 
vehicle navigation, and many others. This study comparatively evaluated 
the differences among the real time kinematic positioning with Trimble 
CenterPoint RTX service and the post-processing kinematic solution 
obtained from CSRS-PPP service. The comparison is based on the data 
collected on Dec. 16 to 22, 2017 on a CORS station, NSB0. From 
observations made on these days, the standard deviation of height 
differences between these two services is 0.057m, while the bias is 
0.080m. As compared with the official coordinates of this CORS, CSRS-PPP 
shows better agreement. </p>
</blockquote>
<h2 id="rtx 作為星基增益技術">rtx 作為星基增益技術</h2>
<p>rtx 與 csrs-ppp 都是基於 GNSS 系統的絕對定位。
rtx 是星基增益的即時動態定位，
藉由地面站即時解算部份地區的精密星曆，
並由網路或衛星廣播到使用者端，
可以實現即時動態基於載波相位的絕對定位。</p>
<h3 id="相對傳統 VBS-RTK 的優勢">相對傳統 VBS-RTK 的優勢</h3>
<p>且相較於傳統的即時動態差分定位，
不需要受限於基站與虛擬基站。
傳統的差分定位，需要架站基站，
或是以基站網內差出虛擬基站。
虛擬基站雖然免除架站基站的困擾，
但需要為每個使用者都內差計算出不同的虛擬基站。</p>
<p>而 rtx 等星基增益技術，只要有固定數量的靜態衛星接收站，
即可即時解算出衛星的精密星曆，透過廣播服務所有使用者。
由於所有使用者需要的是相同的星曆，
不會像 vbs 因使用者增加而加重計算負擔，
透過衛星廣播訊號的話，可以服務無上限人數的使用者。</p>
<h2 id="csrs-ppp">csrs-ppp</h2>
<p>csrs-ppp 是 <strong>加拿大自然資源局</strong> 提供的線上解算精密單點定位服務，
允許使用者在網頁介面上提交 rinex 格式的觀測資料，
在伺服器端解算完畢後，會將成果 email 到使用者信箱。</p>
<p>csrs-ppp 為服務名稱，其內部使用的軟體有過變化，
舊版軟體為 gpspace，現行的新版為 gpspark。
<a href="https://github.com/CGS-GIS/GPSPACE/" title="csrs 開源 gpspace">舊版 gpspace 已開源在 github 上，可以自行編譯取用；</a>
而新版 gpspark 仍在活躍開發中，沒有釋出原始碼，
只有透過網頁介面提供服務，也就是現今的 csrs-ppp。</p>
<h2 id="rtx 與 ppp">rtx 與 ppp</h2>
<p>rtx 是即時動態定位，
csrs-ppp 則要在觀測後輸出觀測檔案上傳，非即時定位。
而 csrs-ppp 在解算時，可以解算移動中觀測的觀測檔，
也就是動態定位；亦能假設接收儀是在固定座標，解算靜態定位。
且 rtx 與 csrs-ppp 均是屬於基於載波相位的精密單點定位，
rtx 使用的是即時解算的星曆，ppp 使用的則是事後解算的精密星曆。
二者在理論上相似。</p>
<h2 id="數據與解算">數據與解算</h2>
<p>數據為 2017-12-16 到 2017-12-22 間觀測，
測站位置為 TWD97 的固定衛星追蹤站 LSB0。
rtx 數據為即時定位的座標，
同時有使用傳統 gnss 接收儀，
輸出 T02 格式並在事後轉換為 rinex 格式。
csrs-ppp 再以 rinex 格式觀測檔進行精密單點定位。</p>
<p>總共會有四種定位方式的結果座標，
分別為 rtx、gpspace、gpspark、座標真值。</p>
<h3 id="座標真值">座標真值</h3>
<p>測站位置為 TWD97 固定衛星追縱站，點號 LSB0，
座標真值為：</p>
<pre><code class="lang-math">\begin{bmatrix}
E \\ N \\ h
\end{bmatrix}
=
\begin{bmatrix}
212830.095483593 \\
2672057.61548927 \\ 
121.798217289174
\end{bmatrix}
</code></pre>
<h3 id="rtx 資料">rtx 資料</h3>
<p>rtx 資料有定位結果的經緯度座標與 twd97 平面座標，
但用 <a href="http://proj4.org" title="地圖投影與大地線計算軟體">proj4</a> 將經緯度轉換成平面座標驗證後發現，
二者不相符，在南北方向約誤差 1.7mm。
最後決定使用 proj4 手動將經緯度座標轉成平面座標，
原本的平面座標則忽略不使用。</p>
<p>整理後發現 rtx 定位座標在尚未收斂時，會有極大的誤差，
原數據如下：</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.0887</td>
<td>0.3809</td>
<td>446670</td>
</tr>
<tr>
<td>N</td>
<td>2672057.8082</td>
<td>0.4441</td>
<td>446670</td>
</tr>
<tr>
<td>h</td>
<td>121.9551</td>
<td>0.9938</td>
<td>446670</td>
</tr>
</tbody>
</table>
<p>但經過作圖後發現，少量數據偏離平均值、真值極大，
故決定以三倍標準差為基準籂選數據。
將數據中離平均值超過三倍標準差的記錄剔除，
再重新計算，再剔除三倍標準差以外的，
重覆直到所有數據都在三倍標準差以內。
過濾後整體標準偏差大幅下降，但也剔除了 14.73% 的數據。</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.0376</td>
<td>0.01230</td>
<td>384425</td>
</tr>
<tr>
<td>N</td>
<td>2672057.7456</td>
<td>0.0096</td>
<td>380365</td>
</tr>
<tr>
<td>h</td>
<td>121.7674</td>
<td>0.0357</td>
<td>380894</td>
</tr>
</tbody>
</table>
<h3 id="gpspace">gpspace</h3>
<p>gpspace 是 csrs-ppp 使用的舊版 ppp 解算軟體，
目前已在 github 上開源。
gpspace 可以從 rinex 格式觀測資料與精密星曆，
解算動態或靜態單點定位。
因為 rtx 為動態定位，為了使二者在同一基準上比較，
在 gpspace 也使用動態定位求解。</p>
<p>gpspace 的定位結果不是很穩定。
相比 rtx 雖然在未收斂時會有極大誤差，
但收斂後表現極佳。
gpspace 則一直處在不穩定的狀態，
雖然不像 rtx 有極端誤差， 但也不會收斂到穩定的值。
整體不如 rtx。</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.3149</td>
<td>0.2005</td>
<td>585324</td>
</tr>
<tr>
<td>N</td>
<td>2672057.5671</td>
<td>0.1460</td>
<td>585324</td>
</tr>
<tr>
<td>h</td>
<td>121.7856</td>
<td>0.3982</td>
<td>585324</td>
</tr>
</tbody>
</table>
<p>嘗試也對 gpspace 的結果用三倍標準差過濾，
結果雖有提升，但不很明顯。</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.3439</td>
<td>0.1355</td>
<td>560509</td>
</tr>
<tr>
<td>N</td>
<td>2672057.5883</td>
<td>0.0771</td>
<td>559062</td>
</tr>
<tr>
<td>h</td>
<td>121.7457</td>
<td>0.2483</td>
<td>560993</td>
</tr>
</tbody>
</table>
<h3 id="gpspark">gpspark</h3>
<p>gpspark 與 gpspace 同為 csrs-ppp，
使用上也類似，都是從 rinex 觀測資料解算精密單點定位，
也一樣能解算動態與靜態，本次研究也同 gpspace 使用動態。
gpspark 的定位結果遠勝 gpspace，
收斂後能超過 rtx，並也沒有 rtx 誇張的極端值。</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.3209</td>
<td>0.0092</td>
<td>604800</td>
</tr>
<tr>
<td>N</td>
<td>2672057.5840</td>
<td>0.0084</td>
<td>604800</td>
</tr>
<tr>
<td>h</td>
<td>121.6928</td>
<td>0.0293</td>
<td>604800</td>
</tr>
</tbody>
</table>
<p>也同樣計算三倍標準差過濾，但結果並沒有顯著提升。</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>212830.3211</td>
<td>0.0086</td>
<td>598610</td>
</tr>
<tr>
<td>N</td>
<td>2672057.5841</td>
<td>0.0080</td>
<td>599439</td>
</tr>
<tr>
<td>h</td>
<td>121.6928</td>
<td>0.0282</td>
<td>602013</td>
</tr>
</tbody>
</table>
<h2 id="比較">比較</h2>
<h3 id="四者作圖比較">四者作圖比較</h3>
<p>將四者畫成散布圖如下。
圖中是沒有過濾三倍標準差的數據，
但也有部份極端值超過圖片邊界而沒有展示。
其中黑線為真值，三種顏色分別為 rtx gpspace gpspark。</p>
<p><a href="http://www.flickr.com/photos/144554087@N04/33490726908"><img src="http://farm8.staticflickr.com/7886/33490726908_fa9ea30069.jpg" alt="LSB0-all-small.png" title="rtx gpspace gpspark 定位結果與真值依時間在 E N h 三方向上的散布圖"></a></p>
<h3 id="rtx 與 gpspark 的差異">rtx 與 gpspark 的差異</h3>
<p>作為二種精度較佳的定位方法，單獨作比較。</p>
<p><a href="http://www.flickr.com/photos/144554087@N04/33490727288"><img src="http://farm8.staticflickr.com/7838/33490727288_bce7063bdf.jpg" alt="LSB0-rtx-gpspark.png" title="將 rtx 減去 gpspark 的定位結果作圖"></a></p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>0.231867336288540</td>
<td>0.380166210406507</td>
<td>446670</td>
</tr>
<tr>
<td>N</td>
<td>-0.224075212125265</td>
<td>0.443210114127836</td>
<td>446670</td>
</tr>
<tr>
<td>h</td>
<td>-0.262113910717083</td>
<td>0.995704156476117</td>
<td>446670</td>
</tr>
</tbody>
</table>
<p>剔除三倍標準差後：</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>平均</th>
<th>標準偏差</th>
<th>數據數</th>
</tr>
</thead>
<tbody>
<tr>
<td>h</td>
<td>-0.0738842003994430</td>
<td>0.0415281011653995</td>
<td>383035</td>
</tr>
<tr>
<td>E</td>
<td>0.2823083015167943</td>
<td>0.0135755887259359</td>
<td>384496</td>
</tr>
<tr>
<td>N</td>
<td>-0.1625613484716249</td>
<td>0.0117006627728922</td>
<td>382166</td>
</tr>
</tbody>
</table>
<h3 id="統計分析">統計分析</h3>
<p><em>一個把所有表格整合的大表格</em></p>
<hr>
<h2 id="以下是之前寫的還沒修改">以下是之前寫的還沒修改</h2>
<p>雖然觀測站固定，但由於 rtx 為動態定位，
因此在 gpspace 與 gpspark 解算時，也使用動態解算。</p>
<p>為了合理比較二者的準確度，</p>
<h2 id="綜合比較">綜合比較</h2>
<p>共使用三個軟體，分別是 trimble rtx 的即時定位結果，
csrs 的線上 ppp spark，csrs 的舊版 ppp gpspace。
目前 gpspace 已經開源在 github 上，可以自行在本機編譯解算；
spark 則只有提供線上解算，允許使用者上傳觀測檔解算。</p>
<p>綜合來說，rtx 較 csrs online 的解算成果較接近公告作標值，
但 csrs online 的精度較佳。
而本地端的舊版本 csrs 精度和準度
都明顯低於 rtx 與 csrs online，就不作統計。</p>
<p><a href="http://www.flickr.com/photos/144554087@N04/33052347358"><img src="http://farm5.staticflickr.com/4914/33052347358_d319bf45e7.jpg" alt="twd97-east.png" title="rtx csrs 定位東西方向比較"></a></p>
<p><a href="http://www.flickr.com/photos/144554087@N04/46927812051"><img src="http://farm8.staticflickr.com/7856/46927812051_b8190b7810.jpg" alt="twd97-north.png" title="rtx csrs 定位南北方向比較"></a></p>
<p><a href="http://www.flickr.com/photos/144554087@N04/39963136943"><img src="http://farm5.staticflickr.com/4905/39963136943_da263f743b.jpg" alt="ellipsoid-height.png" title="rtx csrs 定位橢球高比較"></a></p>
<h2 id="rtx 散布分析">rtx 散布分析</h2>
<p>rtx 定位在三方向上的精度相近。</p>
<table>
<thead>
<tr>
<th>數值</th>
<th>E</th>
<th>N</th>
<th>h</th>
<th>斜距</th>
</tr>
</thead>
<tbody>
<tr>
<td>平均值與與真值的誤差</td>
<td>-0.056137</td>
<td>0.129185</td>
<td>-0.023663</td>
<td>0.14283</td>
</tr>
<tr>
<td>標準偏差</td>
<td>0.044764</td>
<td>0.024273</td>
<td>0.050997</td>
<td>0.072067</td>
</tr>
</tbody>
</table>
<p><a href="http://www.flickr.com/photos/144554087@N04/31986703477"><img src="http://farm8.staticflickr.com/7876/31986703477_1fb33dba6d.jpg" alt="destribution rtx" title="rtx 定位三方向散布情形"></a></p>
<h2 id="csrs online 散布分析">csrs online 散布分析</h2>
<p>csrs 的單點定位在平面精度極佳，但高程精度相對較低。</p>
<table>
<thead>
<tr>
<th>數值</th>
<th>E</th>
<th>N</th>
<th>h</th>
<th>斜距</th>
</tr>
</thead>
<tbody>
<tr>
<td>平均值與與真值的誤差</td>
<td>0.225205</td>
<td>-0.033640</td>
<td>-0.105672</td>
<td>0.25103</td>
</tr>
<tr>
<td>標準偏差</td>
<td>0.0077312</td>
<td>0.0068739</td>
<td>0.0265718</td>
<td>0.028515</td>
</tr>
</tbody>
</table>
<p><a href="http://www.flickr.com/photos/144554087@N04/46202988274"><img src="http://farm8.staticflickr.com/7856/46202988274_713beeb3f0.jpg" alt="destribution csrs online" title="csrs online 定位三方向散布情形"></a></p>
<h2 id="rtx csrs 差距">rtx csrs 差距</h2>
<p>逐秒比較 rtx 與 csrs 二者定位的座標差異。</p>
<table>
<thead>
<tr>
<th>種類</th>
<th>E</th>
<th>N</th>
<th>h</th>
<th>斜距</th>
</tr>
</thead>
<tbody>
<tr>
<td>差異的平均</td>
<td>0.28043</td>
<td>-0.163352</td>
<td>-0.0802983</td>
<td>0.33432</td>
</tr>
<tr>
<td>差異的標準差</td>
<td>0.044771</td>
<td>0.025687</td>
<td>0.057144</td>
<td>0.077005</td>
</tr>
</tbody>
</table>
<p><a href="http://www.flickr.com/photos/144554087@N04/46203489324"><img src="http://farm5.staticflickr.com/4885/46203489324_e40d77081b.jpg" alt="deviation-rtx-csrs.png" title="rtx csrs 二者在三方向上差異"></a></p>
<p><a href="http://www.flickr.com/photos/144554087@N04/46876044942"><img src="http://farm8.staticflickr.com/7815/46876044942_f97d74930c.jpg" alt="deviation-rtx-csrs-destribution.png" title="rtx csrs 二者在三方向上差異分布情形"></a></p>
<h2 id="進度">進度</h2>
<ul>
<li>不使用 rtx 的平面座標，用 proj4 自行轉換。</li>
<li>proj4 geotrans coordp 的結果都和 rtx 的不同。</li>
<li>2017-12-22 的 rtx 很不穩。</li>
<li>gpspace v1.10 的結果比 v1.05 標準偏差差十倍，不知道原因。</li>
</ul>
<h2 id="結論">結論</h2>
<p>大致上 rtx csrs 的定位分布都接近常態分布，
csrs ppp 的精度較佳，而 rtx 的精度稍低，
但平均較接近公告座標。</p>
<script src="ext/paper.js?reference"></script>

<link rel="stylesheet" href="ext/paper.css">
</main>

<script defer src="ext/meta-meta.js"></script>
<script defer data-lazy src="ext/load-disqus.js"></script>
<script>autoLoader.autoLoad()</script>

</body></html>
