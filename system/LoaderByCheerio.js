// Generated by CoffeeScript 1.12.1
(function() {
  var LoaderByCheerio, cheerio;

  cheerio = require('cheerio');

  LoaderByCheerio = (function() {
    function LoaderByCheerio(HTMLText) {
      this.selector = cheerio.load(HTMLText, {
        decodeEntities: false,
        xmlMode: false,
        withDomLvl1: true,
        normalizeWhitespace: false
      });
    }

    LoaderByCheerio.prototype.date = function(setDate) {
      var node;
      node = this.selector('meta[name=date]');
      if (setDate != null) {
        return node.attr('content', setDate);
      } else {
        return node.attr('content');
      }
    };

    LoaderByCheerio.prototype.index = function(setIndex) {
      var node;
      node = this.selector('link[rel=index]');
      if (setIndex != null) {
        return node.attr('href', setIndex);
      } else {
        return node.attr('href');
      }
    };

    LoaderByCheerio.prototype.prev = function(setPrev) {
      var node;
      node = this.selector('link[rel=prev]');
      if (setPrev === 'remove') {
        return node.remove();
      } else if (setPrev != null) {
        return node.attr('href', setPrev);
      } else {
        return node.attr('href');
      }
    };

    LoaderByCheerio.prototype.next = function(setNext) {
      var node;
      node = this.selector('link[rel=next]');
      if (setNext === 'remove') {
        return node.remove();
      } else if (setNext != null) {
        return node.attr('href', setNext);
      } else {
        return node.attr('href');
      }
    };

    LoaderByCheerio.prototype.title = function(setTitle) {
      var node;
      node = this.selector('title');
      if (setTitle != null) {
        return node.text(setTitle);
      } else {
        return node.text();
      }
    };

    LoaderByCheerio.prototype.main = function(setMain) {
      var node;
      node = this.selector('main');
      if (setMain != null) {
        return node.html(setMain);
      } else {
        return node.html();
      }
    };

    LoaderByCheerio.prototype.tags = function(setTags) {
      var node;
      node = this.selector('meta[name=keywords]');
      if (Array.isArray(setTags)) {
        setTags = setTags.join(',');
      }
      if (setTags != null) {
        return node.attr('content', setTags);
      } else {
        return node.attr('content');
      }
    };

    LoaderByCheerio.prototype.clear = function() {
      var attr, i, len, ref, results;
      ref = ['main', 'title', 'tags', 'date', 'prev', 'next'];
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        attr = ref[i];
        results.push(this[attr](''));
      }
      return results;
    };

    LoaderByCheerio.prototype.update = function(newText) {
      var i, j, len, len1, mustUpdate, optionalUpdate, ref, ref1, results;
      ref = ['main', 'title', 'tags'];
      for (i = 0, len = ref.length; i < len; i++) {
        mustUpdate = ref[i];
        this[mustUpdate](newText[mustUpdate]());
      }
      ref1 = ['date', 'prev', 'next'];
      results = [];
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        optionalUpdate = ref1[j];
        if (!this[optionalUpdate]()) {
          results.push(this[optionalUpdate](typeof newText[optionalUpdate] === "function" ? newText[optionalUpdate]() : void 0));
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    LoaderByCheerio.prototype.toString = function() {
      return this.selector.html();
    };

    return LoaderByCheerio;

  })();

  module.exports = LoaderByCheerio;

}).call(this);
